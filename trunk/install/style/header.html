<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="{{echo getlang()}}" lang="{{echo getlang()}}" dir="{{echo $lang['DIR']}}">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>{{echo $lang['INST_INSTALL_WIZARD']}}</title>
<style type="text/css">{{echo gettpl('style.css')}}</style>
<script type="text/javascript" src="{{echo getjquerylink()}}"></script>
<script type="text/javascript">
	//<![CDATA[
	function agree ()
	{
		var agrec = document.getElementById('agrec');
		var agres = document.getElementById('agres');

		if (agrec.checked) { agres.disabled= '';}else{agres.disabled= 'disabled';}
	}

//	http://www.marketingtechblog.com/2007/08/27/javascript-password-strength/
function passwordChanged() 
{
	var strength = document.getElementById("strength");
	var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
	var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
	var enoughRegex = new RegExp("(?=.{6,}).*", "g");
	var pwd = document.getElementById("password");
	
	if (pwd.value.length==0) 
	{
		strength.innerHTML =  '<img src="style/images/p1.gif" alt="! .." />';
	} 
	else if (false == enoughRegex.test(pwd.value)) 
	{
		strength.innerHTML = '<img src="style/images/p2.gif" alt="write more .." />';
	}
	else if (strongRegex.test(pwd.value)) 
	{
		strength.innerHTML = '<img src="style/images/p5.gif" alt="strong .." />';
	} 
	else if (mediumRegex.test(pwd.value))
	{
		strength.innerHTML = '<img src="style/images/p4.gif" alt="Medium .." />';
	} 
	else 
	{
		strength.innerHTML = '<img src="style/images/p3.gif" alt="Weak! .." />';
	}
}

function w_email(l)
{
		var m = document.getElementById(l);
		if (m.value.indexOf("@") == -1 ||m.value.indexOf(".") == -1 || m.value.length < 7 ) 
		{
			alert("{{echo $lang['WRONG_EMAIL']}}");
			m.focus();
		}
}

//By JavaScript Kit (http://javascriptkit.com)
function checkrequired(which)
{
	var pass	=	true;
	if (document.images)
	{
		for (i=0;i<which.length;i++)
		{
			var tempobj=which.elements[i]
			if (tempobj.name.substring(0,8)=="required")
			{
				if (((tempobj.type=="text"||tempobj.type=="textarea")&&tempobj.value=='')||(tempobj.type.toString().charAt(0)=="s" && tempobj.selectedIndex==-1))
				{
					pass	=	false;
					break
				}
			}
		}
	}
	if (!pass)
	{
		alert("{{echo $lang['VALIDATING_FORM_WRONG']}}");
		return false;
	}
	else
	{
		return true;
	}
}

// http://www.dynamicdrive.com/ 
function formCheck(formobj, fieldRequired)
{
	// dialog message
	var alertMsg = "{{echo $lang['VALIDATING_FORM_WRONG']}}:\n";
	var l_Msg = alertMsg.length;
	//lang
	var lang = new Array(9);
	lang["db_server"] = "{{echo $lang['DB_SERVER']}}";
	lang["db_user"] = "{{echo $lang['DB_USER']}}";
	lang["db_name"] = "{{echo $lang['DB_NAME']}}";
	lang["sitename"] = "{{echo $lang['SITENAME']}}";
	lang["siteurl"] = "{{echo $lang['SITEURL']}}";
	lang["sitemail"] = "{{echo $lang['SITEMAIL']}}";
	lang["username"] = "{{echo $lang['USERNAME']}}";
	lang["password"] = "{{echo $lang['PASSWORD']}}";
	lang["password2"] = "{{echo $lang['PASSWORD2']}}";
	lang["email"] = "{{echo $lang['EMAIL']}}";
	
	for (var i = 0; i < fieldRequired.length; i++)
	{
		var obj = formobj.elements[fieldRequired[i]];
		if (obj)
		{
			switch(obj.type)
			{
				case "text":
				case "textarea":
					if (obj.value == "" || obj.value == null)
						alertMsg += " - " + lang[fieldRequired[i]] + "\n";
					break;
				default:
			}
			
			if (obj.type == undefined)
			{
				var blnchecked = false;
				for (var j = 0; j < obj.length; j++)
				{
					if (obj[j].checked)
						blnchecked = true;
				}
				
				if (!blnchecked)
					alertMsg += " - " + lang[fieldRequired[i]] + "\n";
			}
		}
	}

	if (alertMsg.length == l_Msg)
		return true;
	else
	{
		alert(alertMsg);
		return false;
	}
}

/*language step*/
$(document).ready(function() {
  $('#choose li').hover(function() {
    $(this).animate( { width: "256", height: "256" }, { queue: false, duration: 200 });
  },
  function() {
    $(this).animate( { width: "128", height: "128" }, { queue: false, duration: 230 });
  });
});

// -->
//]]>

</script>
</head>
<body>
<div class="header">Wizard installation kleeja , version 1.0.0 ....</div>
<p><a style="float:left" onclick="window.open(this.href,'_blank');return false;" href="http://www.kleeja.com"><img src="../styles/default/images/logo.png" alt="kleeja" /></a></p>
<br />
{{if(((isset($_GET['step']) && $_GET['step'] != 'language') && (strpos('index.php', $_SERVER['PHP_SELF'])=== false && isset($_GET['step']))) OR (isset($_GET['step']) && $_GET['step'] == 'license' || $_GET['step'] == 'action_file') ):}}
<form action="?change_lang" method="post">
<img src="style/images/world.png" alt="language" style="float:right;margin:2px 10px;" /> 
<select name="lang" style="float:right;" onchange="submit()">
{{if($dh = opendir($_path . 'lang')):}}
{{while (($file = readdir($dh)) !== false): if(strpos($file, '.') === false && $file != '..' && $file != '.'):}}
<option value="{{echo $file}}" {{echo $file==$_GET['lang']?'selected="selected"':''}}>{{echo $file}}</option>
{{endif; endwhile;closedir($dh);endif;}}
</select>
<input type="hidden" name="step_is" value="{{echo htmlspecialchars($_GET['step'])}}" />
</form>
{{endif;}}

<!-- start all box body  -->
<div class="box_body">


<div class="clr"></div><br />




